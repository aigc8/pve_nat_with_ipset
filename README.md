Proxmox VE 端口转发配置脚本
这个脚本用于在Proxmox VE上配置端口转发,将外部流量转发到内部虚拟机。

功能
添加端口转发规则
列出现有的转发规则
删除指定的转发规则
使用方法
./pve_nat.sh {add|list|del}
add: 添加新的转发规则
list: 列出所有现有规则
del: 删除指定规则
部署注意事项
网络接口名称:
脚本中使用了"eno2np1"和"vmbr0"作为网络接口名。请根据您的PVE实际网络配置修改这些接口名。

内网IP地址:

脚本中使用"192.168.19.1"作为内网网关IP。请根据您的实际网络配置修改此IP。

iptables配置文件路径:
默认配置文件路径为"/root/iptables.config.sh"。请确保此文件存在,或修改脚本中的路径。

PVE防火墙:
如果您使用PVE防火墙,请确保在防火墙规则中允许相应的端口。

虚拟机网络:
确保虚拟机的网络配置正确,能够与PVE主机通信。

IP白名单:
脚本提供了仅允许特定IP访问的选项。如果选择此选项,请确保已正确配置了"PVEFW-0-ipset-v4" ipset。

持久化:
脚本添加的iptables规则在重启后会失效。建议将规则保存到iptables配置文件中,并设置开机自动加载。

安全性:
在生产环境中使用时,请仔细检查并测试规则,以确保安全性。

备份:
在进行任何更改之前,建议备份当前的iptables配置。
